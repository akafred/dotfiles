- name: install python3
  homebrew:
    name: "{{ item }}"
  with_items:
    - "python"

- name: make sure pip is updated
  shell: "{{ item }} install --upgrade pip"
  with_items:
    - "pip3"

- name: make sure we have virtualenv
  pip: name="{{ item }}" executable=pip3
  with_items:
    - "virtualenv"
    - "virtualenvwrapper"

- name: add virtualenvwrapper shell commands
  blockinfile:
    dest: "{{ ansible_env.HOME }}/.paths_homes_etc"
    marker: "# {mark} ANSIBLE MANAGED BLOCK for virtualenvwrapper shell commands"
    content: |
             export VIRTUALENVWRAPPER_PYTHON=python3
             export WORKON_HOME=$HOME/.virtualenvs
             export PROJECT_HOME=$HOME/Projects
             export VIRTUALENVWRAPPER_VIRTUALENV=/usr/local/bin/virtualenv
             export VIRTUALENVWRAPPER_VIRTUALENV_ARGS='--no-site-packages'
             source /usr/local/bin/virtualenvwrapper.sh

- name: install jupyter
  homebrew: name="{{ item }}"
  with_items:
    - "jupyter"

- name: install ipython
  pip: name=IPython executable=pip3
