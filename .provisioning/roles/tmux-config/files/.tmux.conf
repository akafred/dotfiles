# Mouse support
set-option -g mouse on

# 256 color support + true color
set -g default-terminal "screen-256color"
set -ga terminal-overrides ",*256col*:Tc"

# Increase scrollback history
set -g history-limit 50000

# No delay on ESC key (important for Vim)
set -sg escape-time 0

# Change prefix to Ctrl+A (keep Ctrl+B as secondary)
set-option -g prefix C-a
set-option -g prefix2 C-b
bind-key C-a send-prefix

# Windows and panes start at 1
set -g base-index 1
setw -g pane-base-index 1

# Auto-renumber windows when one is closed
set -g renumber-windows on

# Keep custom window names
set -g allow-rename off

# Easier split bindings
bind v split-window -h
bind h split-window -v

# Reload config with prefix+r
bind r source-file ~/.tmux.conf \; display "Config reloaded!"

# Enter copy-mode with prefix+Escape (easier than [ on Norwegian keyboards)
bind Escape copy-mode

# Cheat sheet popup with prefix+H (press q to close)
bind H display-popup -E -w 52 -h 14 '\
echo "\
  tmux shortcuts (prefix = C-a or C-b)\n\
  ────────────────────────────────────\n\
  H = this help       ? = all bindings\n\
  v = split vertical  h = split horiz\n\
  arrows = switch pane (with prefix)\n\
  Escape = copy mode  r = reload config\n\
  c = new window      , = rename window\n\
  n/p = next/prev     d = detach\n\
\n\
  Press q to close\n\
" | less -R'
