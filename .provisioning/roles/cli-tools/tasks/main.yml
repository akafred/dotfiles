- name: install common tools using brew
  homebrew: name={{ item }}
  with_items:
   - tree
   - mtr
   - wget
   - autojump

# issue with version no

- name: make sure mtr is runnable for non-root user
  become: true
  file: path=/usr/local/Cellar/mtr/0.86/sbin/mtr owner=root group=wheel state=file mode=6755

# also need to link mtr into /usr/local/bin

- name: need to link mtr into /usr/local/bin
  file: src=/usr/local/Cellar/mtr/0.86/sbin/mtr dest=/usr/local/bin/mtr state=link mode=0755

- name: create bash_profile
  command: touch {{ ansible_env.HOME }}/.bash_profile  creates={{ ansible_env.HOME }}/.bash_profile

- name: create .paths_homes_etc
  command: touch {{ ansible_env.HOME }}/.paths_homes_etc  creates={{ ansible_env.HOME }}/.paths_homes_etc

- name: add paths_homes_etc to bash_profile
  lineinfile: >
    dest={{ ansible_env.HOME }}/.bash_profile
    line="source ~/.paths_homes_etc"
    regexp="paths_homes_etc"

- name: add locale exports
  lineinfile: >
    dest={{ ansible_env.HOME }}/.paths_homes_etc
    line="export {{ item }}"
    regexp="{{ item }}"
  with_items:
    - "LC_CTYPE=en_US.UTF-8"
    - "LC_ALL=en_US.UTF-8"

- name: tldr repo
  command: >
    /usr/local/bin/brew tap tldr-pages/tldr
    creates=/usr/local/Library/Taps/tldr-pages/homebrew-tldr

- name: install tldr
  homebrew: name=tldr
